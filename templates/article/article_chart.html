{% extends "base.html" %}

{% block content %}
  <h2>Cantidad de likes por articulo</h2>
  <canvas id="likesChart"></canvas>

  <h2>Cantidad de dislikes por articulo</h2>
  <canvas id="dislikesChart"></canvas>

  <h2>Article Average Rating Comparison</h2>
  <canvas id="avgRatingChart"></canvas>

  <h2>Article Average Views Comparison</h2>
  <canvas id="avgViewsChart"></canvas>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Data for likes chart
    const likesData = {{ likes_data|safe }};
    const likesCtx = document.getElementById('likesChart').getContext('2d');
    new Chart(likesCtx, {
      type: 'bar',
      data: {
        labels: likesData.titles,
        datasets: [
          {
            label: 'Likes',
            data: likesData.likes,
            backgroundColor: 'rgba(54, 162, 235, 0.7)' // Blue color
          }
        ]
      },
      options: {
        responsive: true,
        scales: {
          x: {
            title: {
              display: true,
              text: 'Articulos'
            }
          },
          y: {
            title: {
              display: true,
              text: 'Numero de likes'
            }
          }
        }
      }
    });

    // Data for dislikes chart
    const dislikesData = {{ dislikes_data|safe }};
    const dislikesCtx = document.getElementById('dislikesChart').getContext('2d');
    new Chart(dislikesCtx, {
      type: 'bar',
      data: {
        labels: dislikesData.titles,
        datasets: [
          {
            label: 'Dislikes',
            data: dislikesData.dislikes,
            backgroundColor: 'rgba(54, 162, 235, 0.7)' // Blue color
          }
        ]
      },
      options: {
        responsive: true,
        scales: {
          x: {
            title: {
              display: true,
              text: 'Articles'
            }
          },
          y: {
            title: {
              display: true,
              text: 'Number of Dislikes'
            }
          }
        }
      }
    });

    // Data for average rating chart
    const avgRatingData = {{ avg_rating_data|safe }};
    const avgRatingCtx = document.getElementById('avgRatingChart').getContext('2d');
    new Chart(avgRatingCtx, {
      type: 'bar',
      data: {
        labels: avgRatingData.titles,
        datasets: [
          {
            label: 'Average Rating',
            data: avgRatingData.ratings,
            backgroundColor: 'rgba(54, 162, 235, 0.7)' // Blue color
          }
        ]
      },
      options: {
        responsive: true,
        scales: {
          x: {
            title: {
              display: true,
              text: 'Articles'
            }
          },
          y: {
            title: {
              display: true,
              text: 'Average Rating'
            }
          }
        }
      }
    });

    // Data for average views chart
    const avgViewsData = {{ avg_views_data|safe }};
    const avgViewsCtx = document.getElementById('avgViewsChart').getContext('2d');
    new Chart(avgViewsCtx, {
      type: 'bar',
      data: {
        labels: avgViewsData.titles,
        datasets: [
          {
            label: 'Average Views',
            data: avgViewsData.views,
            backgroundColor: 'rgba(54, 162, 235, 0.7)' // Blue color
          }
        ]
      },
      options: {
        responsive: true,
        scales: {
          x: {
            title: {
              display: true,
              text: 'Articles'
            }
          },
          y: {
            title: {
              display: true,
              text: 'Number of Views'
            }
          }
        }
      }
    });
  </script>
{% endblock %}
